[{"/Users/vatc/Desktop/praktikum/react-mesto-api-full/frontend/src/index.js":"1","/Users/vatc/Desktop/praktikum/react-mesto-api-full/frontend/src/components/App.js":"2","/Users/vatc/Desktop/praktikum/react-mesto-api-full/frontend/src/reportWebVitals.js":"3","/Users/vatc/Desktop/praktikum/react-mesto-api-full/frontend/src/components/Header.js":"4","/Users/vatc/Desktop/praktikum/react-mesto-api-full/frontend/src/components/Footer.js":"5","/Users/vatc/Desktop/praktikum/react-mesto-api-full/frontend/src/components/AddPlacePopup.js":"6","/Users/vatc/Desktop/praktikum/react-mesto-api-full/frontend/src/components/Main.js":"7","/Users/vatc/Desktop/praktikum/react-mesto-api-full/frontend/src/components/EditProfilePopup.js":"8","/Users/vatc/Desktop/praktikum/react-mesto-api-full/frontend/src/components/EditAvatarPopup.js":"9","/Users/vatc/Desktop/praktikum/react-mesto-api-full/frontend/src/components/ImagePopup.js":"10","/Users/vatc/Desktop/praktikum/react-mesto-api-full/frontend/src/components/ProtectedRoute.js":"11","/Users/vatc/Desktop/praktikum/react-mesto-api-full/frontend/src/components/Login.js":"12","/Users/vatc/Desktop/praktikum/react-mesto-api-full/frontend/src/components/InfoTooltip.js":"13","/Users/vatc/Desktop/praktikum/react-mesto-api-full/frontend/src/components/Register.js":"14","/Users/vatc/Desktop/praktikum/react-mesto-api-full/frontend/src/contexts/CurrentUserContext.js":"15","/Users/vatc/Desktop/praktikum/react-mesto-api-full/frontend/src/utils/auth.js":"16","/Users/vatc/Desktop/praktikum/react-mesto-api-full/frontend/src/utils/api.js":"17","/Users/vatc/Desktop/praktikum/react-mesto-api-full/frontend/src/components/PopupWithForm.js":"18","/Users/vatc/Desktop/praktikum/react-mesto-api-full/frontend/src/components/Card.js":"19"},{"size":608,"mtime":1616262421000,"results":"20","hashOfConfig":"21"},{"size":8444,"mtime":1617135961523,"results":"22","hashOfConfig":"21"},{"size":362,"mtime":1616262421000,"results":"23","hashOfConfig":"21"},{"size":1005,"mtime":1616945295453,"results":"24","hashOfConfig":"21"},{"size":211,"mtime":1616262421000,"results":"25","hashOfConfig":"21"},{"size":2050,"mtime":1616262421000,"results":"26","hashOfConfig":"21"},{"size":1601,"mtime":1617135984234,"results":"27","hashOfConfig":"21"},{"size":2653,"mtime":1617135984234,"results":"28","hashOfConfig":"21"},{"size":975,"mtime":1617041174483,"results":"29","hashOfConfig":"21"},{"size":541,"mtime":1616262421000,"results":"30","hashOfConfig":"21"},{"size":318,"mtime":1616262421000,"results":"31","hashOfConfig":"21"},{"size":1308,"mtime":1616262421000,"results":"32","hashOfConfig":"21"},{"size":1025,"mtime":1616262421000,"results":"33","hashOfConfig":"21"},{"size":1531,"mtime":1616262421000,"results":"34","hashOfConfig":"21"},{"size":84,"mtime":1616262421000,"results":"35","hashOfConfig":"21"},{"size":1844,"mtime":1617149915249,"results":"36","hashOfConfig":"21"},{"size":4443,"mtime":1617149904844,"results":"37","hashOfConfig":"21"},{"size":800,"mtime":1616262421000,"results":"38","hashOfConfig":"21"},{"size":1540,"mtime":1617130762527,"results":"39","hashOfConfig":"21"},{"filePath":"40","messages":"41","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"ywsu6x",{"filePath":"42","messages":"43","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"44"},{"filePath":"45","messages":"46","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"47","messages":"48","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"49"},{"filePath":"50","messages":"51","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"52","messages":"53","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"54","messages":"55","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"56","messages":"57","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"58","messages":"59","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"60"},{"filePath":"61","messages":"62","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"63","messages":"64","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"65","messages":"66","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"67","messages":"68","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"69","messages":"70","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"71","messages":"72","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"73","messages":"74","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"75","messages":"76","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"77","messages":"78","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"79","messages":"80","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"/Users/vatc/Desktop/praktikum/react-mesto-api-full/frontend/src/index.js",[],"/Users/vatc/Desktop/praktikum/react-mesto-api-full/frontend/src/components/App.js",["81"],"import React from 'react';\nimport { Route, Switch, Redirect, useHistory } from 'react-router-dom';\nimport '../index.js';\nimport Header from './Header';\nimport Footer from './Footer';\nimport Main from './Main';\nimport AddPlacePopup from './AddPlacePopup';\nimport EditProfilePopup from './EditProfilePopup';\nimport EditAvatarPopup from './EditAvatarPopup';\nimport ImagePopup from './ImagePopup';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\n// import api from '../utils/api';\nimport api from '../utils/api';\nimport ProtectedRoute from './ProtectedRoute';\nimport Login from './Login';\nimport Register from './Register';\nimport InfoTooltip from './InfoTooltip';\nimport * as auth from '../utils/auth';\n\nfunction App() {\n\n    const history = useHistory();\n\n    const [isEditAvatarPopupOpen, setIsOpenPopupAvatar] = React.useState(false);\n    const [isEditProfilePopupOpen, setIsOpenPopupProfile] = React.useState(false);\n    const [isAddPlacePopupOpen, setIsOpenPopupPlace] = React.useState(false);\n    const [selectedCard, setSelectedCard] = React.useState(false);\n    const [imageData, setImageData] = React.useState(null)\n    \n    const [cards, setCards] = React.useState([])\n    const [currentUser,  setCurrentUser] = React.useState({}); \n\n    const [loggedIn, setLoggedIn] = React.useState(false);\n    const [isInfoTooltipOpen, setIsInfoTooltipOpen] = React.useState(false);\n    const [email, setEmail] = React.useState('');\n    const [isRequestSuccessful, setisRequestSuccessful] = React.useState(false);\n    // const [isLoading, setIsLoading] = useState(false);\n\n    function handleCheckToken() {\n        const jwt = localStorage.getItem('jwt')\n        if (jwt) {\n          auth.getContent(jwt)\n            .then((res) => {\n                if (res) {\n                    setLoggedIn(true)\n                    setEmail(res.email)\n                    setCurrentUser(res);\n                    history.push('/')\n                }\n            })\n            .catch((err) => {\n              console.log(err)\n            })\n        }\n    }\n    \n    // React.useEffect(() => {\n    //     console.log(currentUser)\n    //   }, [currentUser])\n\n      \n    React.useEffect(() => {\n        handleCheckToken()\n    }, [loggedIn])\n\n    React.useEffect(() => {\n        api.getCardsInformation()\n            .then((res) => {\n                setCards(res);\n            })\n            .catch((err) => console.error(err));\n    }, []);\n\n    React.useEffect(() => {\n        api.getUserInfoFromServer()\n            .then((res) => {\n                setCurrentUser(res);\n            })\n            .catch((err) => console.error(err));\n    }, []);\n\n    function handleEditAvatarClick() {\n        setIsOpenPopupAvatar(true);\n    }\n    \n    function handleAddPlaceClick() {\n        setIsOpenPopupPlace(true);\n    }\n\n    function handleEditProfileClick() {\n        setIsOpenPopupProfile(true);\n    }\n\n    function handleCardLike(card) {\n        const isLiked = card.likes.some(like => like === currentUser._id);\n        api\n            .changeLikeCardStatus(card._id, !isLiked)\n            .then((newCard) => {\n                const newCards = cards.map((item) => (item._id === card._id ? newCard : item));\n                setCards(newCards);\n            })\n            .catch((err) => {\n                console.error(err);\n            });\n    }\n\n    function handleCardDelete(card) {\n        api.deleteCard(card._id)\n            .then(() => {\n                setCards(cards.filter(c => c._id !== card._id));\n        })\n        .catch((err) => console.error(err));\n    }\n    \n    function handleUpdateUser(userData) {\n        api.setUserInfoOnServer(userData.name, userData.about)\n            .then(res => {\n                setCurrentUser(res);\n                closeAllPopups();\n        })\n        .catch((err) => console.error(err))\n    }\n\n    function handleUpdateAvatar(userData) {\n        api.editProfileAvatar(userData.avatar)\n            .then(res => {\n                setCurrentUser(res);\n                closeAllPopups()\n        })\n        .catch((err) => console.error(err))\n\n    }\n\n    function handleAddPlaceSubmit(cardData) {\n        api.addCards(cardData.name, cardData.link)\n            .then(card => {\n                setCards([card, ...cards]);\n                closeAllPopups()\n        })\n        .catch((err) => console.error(err))\n    }\n\n    function handleCardClick(card) {        \n        setSelectedCard(true);\n        setImageData(card);\n    }\n\n    function closeAllPopups() {\n        setIsOpenPopupAvatar(false);\n        setIsOpenPopupProfile(false);\n        setIsOpenPopupPlace(false);\n        setSelectedCard(null);\n        setIsInfoTooltipOpen(false)\n    }\n\n    function handleRegister(email, password) {\n        auth.register(email, password)\n        .then((res) => {\n            if (res) {\n                setisRequestSuccessful(true);\n                setIsInfoTooltipOpen(true);\n                history.push('/sign-in');\n            }\n        })\n        .catch((err) => {\n            console.log(`Ошибка: ${err}`);\n            setisRequestSuccessful(false);\n            setIsInfoTooltipOpen(true);\n        })\n    }\n\n    const handleLogin = (email, password) => {\n        auth.authorize(email, password)\n            .then((res) => {\n                if (res.token) {\n                    localStorage.setItem('jwt', res.token);\n                    setLoggedIn(true);\n                    history.push('/')\n                }\n            })\n            .catch((err) => {\n                console.log(`Ошибка: ${err}`);\n                setIsInfoTooltipOpen(true);\n                setisRequestSuccessful(false);\n            })\n    }\n    \n    function handleLogout() {\n        setLoggedIn(false)\n        setEmail(email)\n        localStorage.removeItem('jwt')\n        history.push('/sign-in')\n    }\n\n    return (\n        <div className=\"page\">\n            <CurrentUserContext.Provider value={currentUser}>\n                <Header \n                    email={email} \n                    loggedOut={handleLogout} \n                    loggedIn={loggedIn}\n                />\n                    <Switch>\n                        \n                        <ProtectedRoute\n                            exact path='/'\n                            loggedIn={loggedIn}\n                            component={Main}\n                            onEditAvatar={handleEditAvatarClick}\n                            onEditProfile={handleEditProfileClick}\n                            onAddPlace={handleAddPlaceClick}\n                            onCardClick={handleCardClick}\n                            onCardList={cards}\n                            onCardLike={handleCardLike}\n                            onDeleteCard={handleCardDelete}\n                        >\n                        </ProtectedRoute>\n\n                        <Route path='/sign-in'>\n                            <Login handleLogin={handleLogin} setEmail={setEmail} />\n                        </Route>\n\n                        <Route path='/sign-up'>\n                            <Register handleRegister={handleRegister} />\n                        </Route>\n\n                        <Route>\n                            {loggedIn ? <Redirect to='/' /> : <Redirect to='/sign-in' />}\n                        </Route>\n                    </Switch>\n                    \n\n\n                <EditProfilePopup \n                    isOpen={isEditProfilePopupOpen} \n                    onClose={closeAllPopups} \n                    onUpdateUser={handleUpdateUser}\n                /> \n\n                <EditAvatarPopup \n                    isOpen={isEditAvatarPopupOpen} \n                    onClose={closeAllPopups} \n                    onUpdateAvatar={handleUpdateAvatar}\n                /> \n\n                <AddPlacePopup\n                    isOpen={isAddPlacePopupOpen}\n                    onClose={closeAllPopups}\n                    onAddCard={handleAddPlaceSubmit}\n                />\n\n                <ImagePopup\n                    card={imageData}\n                    isOpen={selectedCard}\n                    onClose={closeAllPopups}\n                />\n\n                <InfoTooltip \n                    isRequestSuccessful={isRequestSuccessful} \n                    isOpen={isInfoTooltipOpen} \n                    onClose={closeAllPopups} \n                />\n\n\n            </CurrentUserContext.Provider>\n\n            <Footer />\n        </div>\n    );\n}\n\nexport default App;\n ","/Users/vatc/Desktop/praktikum/react-mesto-api-full/frontend/src/reportWebVitals.js",[],"/Users/vatc/Desktop/praktikum/react-mesto-api-full/frontend/src/components/Header.js",["82"],"import React from 'react';\nimport logo from '../images/logo.svg';\nimport { BrowserRouter, NavLink, Route } from 'react-router-dom';\n\nfunction Header(props) {\n\n  const loginNavBar = (\n    <nav className='header__container'>\n        <Route path='/sign-up'>\n              <NavLink className='header__link' to='/sign-in'>Войти</NavLink>\n          </Route>\n          <Route path='/sign-in'>\n              <NavLink className='header__link' to='/sign-up'>Регистрация</NavLink>\n          </Route>\n          <Route exact path='/'>\n              <div className='header__container'>\n                  <p className='header__email'>{props.email}</p>\n                  <button className='header__button-logout' onClick={props.loggedOut}>Выйти</button>\n              </div>\n          </Route>\n    </nav>\n)\n\n  return (\n    <header className=\"header\">\n        <img className=\"logo\" src={logo} alt=\"изображение лого\" /> \n        {loginNavBar}\n    </header>\n  );\n}\n\nexport default Header;","/Users/vatc/Desktop/praktikum/react-mesto-api-full/frontend/src/components/Footer.js",[],"/Users/vatc/Desktop/praktikum/react-mesto-api-full/frontend/src/components/AddPlacePopup.js",[],"/Users/vatc/Desktop/praktikum/react-mesto-api-full/frontend/src/components/Main.js",[],"/Users/vatc/Desktop/praktikum/react-mesto-api-full/frontend/src/components/EditProfilePopup.js",[],"/Users/vatc/Desktop/praktikum/react-mesto-api-full/frontend/src/components/EditAvatarPopup.js",["83"],"import React from 'react';\nimport PopupWithForm from './PopupWithForm';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\n\nfunction EditAvatarPopup({ isOpen, onClose,  onUpdateAvatar}) {\n  \n    const inputAvatarRef = React.useRef(\"\");\n\n    function handleSubmit(e) {\n        e.preventDefault();\n        onUpdateAvatar({ \n            avatar: inputAvatarRef.current.value  \n        });\n    }\n\n    return (\n        <PopupWithForm\n            isOpen={isOpen}\n            onClose={onClose}\n            title=\"Обновить аватар\"\n            popupName=\"avatar\"\n            formName=\"form_update\"\n            onSubmit={handleSubmit}\n        >\n            <input \n                className=\"popup__input popup__input_link-avatar popup__input_link\" \n                type=\"url\" \n                name=\"avatar\" \n                ref={inputAvatarRef}\n                required \n            />   \n        </PopupWithForm>\n  );\n}\n\nexport default EditAvatarPopup;","/Users/vatc/Desktop/praktikum/react-mesto-api-full/frontend/src/components/ImagePopup.js",[],"/Users/vatc/Desktop/praktikum/react-mesto-api-full/frontend/src/components/ProtectedRoute.js",[],"/Users/vatc/Desktop/praktikum/react-mesto-api-full/frontend/src/components/Login.js",[],"/Users/vatc/Desktop/praktikum/react-mesto-api-full/frontend/src/components/InfoTooltip.js",[],"/Users/vatc/Desktop/praktikum/react-mesto-api-full/frontend/src/components/Register.js",[],"/Users/vatc/Desktop/praktikum/react-mesto-api-full/frontend/src/contexts/CurrentUserContext.js",[],"/Users/vatc/Desktop/praktikum/react-mesto-api-full/frontend/src/utils/auth.js",[],"/Users/vatc/Desktop/praktikum/react-mesto-api-full/frontend/src/utils/api.js",[],"/Users/vatc/Desktop/praktikum/react-mesto-api-full/frontend/src/components/PopupWithForm.js",[],"/Users/vatc/Desktop/praktikum/react-mesto-api-full/frontend/src/components/Card.js",[],{"ruleId":"84","severity":1,"message":"85","line":64,"column":8,"nodeType":"86","endLine":64,"endColumn":18,"suggestions":"87"},{"ruleId":"88","severity":1,"message":"89","line":3,"column":10,"nodeType":"90","messageId":"91","endLine":3,"endColumn":23},{"ruleId":"88","severity":1,"message":"92","line":3,"column":10,"nodeType":"90","messageId":"91","endLine":3,"endColumn":28},"react-hooks/exhaustive-deps","React Hook React.useEffect has a missing dependency: 'handleCheckToken'. Either include it or remove the dependency array.","ArrayExpression",["93"],"no-unused-vars","'BrowserRouter' is defined but never used.","Identifier","unusedVar","'CurrentUserContext' is defined but never used.",{"desc":"94","fix":"95"},"Update the dependencies array to be: [handleCheckToken, loggedIn]",{"range":"96","text":"97"},[2227,2237],"[handleCheckToken, loggedIn]"]